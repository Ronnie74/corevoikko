#!/usr/bin/env python2.4
# -*- coding: utf-8 -*-

# Copyright 2005-2006 Harri Pitk√§nen (hatapitk@cc.jyu.fi)
# This program inflects Finnish words.
# This program requires Python version 2.4 or newer.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

import hfaffix
import hfutils
import sys
import locale


NOUN_AFFIX_FILE = 'orig_data/subst.aff'
PARAM_ENCODING = locale.getpreferredencoding()

if len(sys.argv) == 3:
	word = unicode(sys.argv[1], PARAM_ENCODING)
	infclass = sys.argv[2]
else:
	print 'Usage: hf-inflect-word word inflection_class'
	sys.exit(1)

infclass_parts = infclass.split('-')
if len(infclass_parts) == 2:
	infclass_main = infclass
	grad_type = '-'
elif len(infclass_parts) == 3:
	infclass_main = infclass_parts[0]+'-'+infclass_parts[1]
	grad_type = infclass_parts[2]
else:
	print 'Incorrect inflection class'


noun_classes = hfaffix.read_noun_classes(NOUN_AFFIX_FILE)
for noun_class in noun_classes:
	if noun_class['cname'] != infclass_main: continue
	inflected_words = hfaffix.inflect_noun(word, grad_type, noun_class)
	if inflected_words == None: continue
	for inflected_word in inflected_words:
		if hfutils.read_option(inflected_word[2], 'ps', '-') != 'r':
			print inflected_word[0].ljust(20)+inflected_word[1]
